# Pytest Configuration for Mental Health LLM Evaluation Testing

[tool:pytest]
minversion = 6.0
addopts = 
    -ra 
    -q 
    --strict-markers 
    --strict-config 
    --cov=src 
    --cov-report=html:htmlcov 
    --cov-report=term-missing 
    --cov-report=xml 
    --cov-fail-under=90
    --tb=short
    --maxfail=5
    --durations=10
    --html=reports/pytest_report.html
    --self-contained-html

testpaths = 
    tests

python_files = 
    test_*.py
    *_test.py

python_classes = 
    Test*

python_functions = 
    test_*

markers =
    unit: Unit tests for individual components
    integration: Integration tests for complete workflows
    safety: Safety and security testing
    performance: Performance and benchmark testing
    slow: Tests that take more than 5 seconds
    external: Tests requiring external API access
    mock: Tests using mock objects
    critical: Critical functionality tests
    regression: Regression tests for bug fixes
    quality: Quality assurance tests

filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

junit_family = xunit2
junit_logging = all
junit_log_passing_tests = false

# Timeout for individual tests (in seconds)
timeout = 300

# Performance thresholds
performance_regressions = true