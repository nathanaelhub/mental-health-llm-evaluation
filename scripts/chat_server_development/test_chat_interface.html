<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Chat - Test Interface</title>
    <style>
        /* Dark Theme Variables */
        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #06b6d4;
            
            /* Dark Mode Colors */
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-light: #ffffff;
            --text-muted: #64748b;
            
            --bg-primary: #1e293b;
            --bg-secondary: #334155;
            --bg-dark: #0f172a;
            --bg-chat: #0f172a;
            --bg-card: #1e293b;
            --bg-hover: #334155;
            
            --border-color: #475569;
            --border-radius: 12px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            --shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
            
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: var(--text-primary);
        }

        .chat-container {
            width: 100%;
            max-width: 800px;
            height: 90vh;
            background: var(--bg-primary);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-hover);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        .chat-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--text-light);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .title-section h1 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .title-section p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .status-section {
            text-align: right;
        }

        .model-label, .session-label {
            font-size: 0.8rem;
            opacity: 0.8;
            display: block;
            margin-bottom: 2px;
        }

        .model-name, .session-id {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .confidence-display {
            margin-top: 4px;
            font-size: 0.75rem;
        }

        .confidence-value {
            color: var(--success-color);
            font-weight: 600;
        }

        .model-controls {
            margin-top: 8px;
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        .new-conversation-btn {
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .new-conversation-btn:hover {
            background: linear-gradient(135deg, #059669, #047857);
            transform: translateY(-1px);
        }

        /* Chat Messages */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: var(--bg-chat);
        }

        .welcome-message {
            text-align: center;
            margin-bottom: 30px;
        }

        .system-message .message-content {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
            border: 2px solid var(--primary-color);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            max-width: 90%;
            margin: 0 auto;
        }

        .system-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            margin: 0 auto 15px;
            box-shadow: var(--shadow);
        }

        .conversation-history {
            padding: 20px 0;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            animation: messageSlideIn 0.4s ease-out;
        }

        .message.user-message {
            justify-content: flex-end;
        }

        .message.assistant-message {
            justify-content: flex-start;
        }

        .message-content {
            max-width: 75%;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .user-message .message-content {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .user-message .message-avatar {
            background: linear-gradient(135deg, var(--info-color), #0891b2);
            color: white;
        }

        .assistant-message .message-avatar {
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
        }

        .message-bubble {
            background: var(--bg-secondary);
            border-radius: 18px;
            padding: 15px 18px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
            position: relative;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .user-message .message-bubble {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-bottom-right-radius: 6px;
        }

        .assistant-message .message-bubble {
            background: var(--bg-card);
            color: var(--text-primary);
            border-bottom-left-radius: 6px;
        }

        .message-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-message .message-meta {
            justify-content: flex-end;
        }

        .message-time {
            opacity: 0.7;
        }

        .model-badge {
            background: rgba(99, 102, 241, 0.2);
            color: var(--primary-color);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        /* Chat Input */
        .chat-input-container {
            background: var(--bg-primary);
            border-top: 1px solid var(--border-color);
            padding: 20px;
        }

        .chat-input-wrapper {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .chat-input-wrapper textarea {
            flex: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 0.95rem;
            line-height: 1.4;
            resize: none;
            min-height: 48px;
            max-height: 120px;
            font-family: inherit;
        }

        .chat-input-wrapper textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .send-button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 12px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.1rem;
        }

        .send-button:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-hover);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Status Messages */
        .status-message {
            text-align: center;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .status-message.info {
            background: rgba(6, 182, 212, 0.1);
            color: var(--info-color);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .status-message.success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status-message.warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        /* Animations */
        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-style: italic;
            padding: 10px 0;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dots span {
            width: 6px;
            height: 6px;
            background: var(--text-secondary);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite;
        }

        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingBounce {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .chat-container {
                height: 100vh;
                border-radius: 0;
            }
            
            .message-content {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Header -->
        <div class="chat-header">
            <div class="title-section">
                <h1><i class="fas fa-heart"></i> Mental Health Support</h1>
                <p>Intelligent LLM-powered mental health assistance</p>
            </div>
            <div class="status-section">
                <span class="model-label">Currently chatting with:</span>
                <span id="current-model" class="model-name">Selecting best model...</span>
                <div class="confidence-display" id="confidence-display" style="display: none;">
                    <span class="confidence-label">Confidence:</span>
                    <span id="confidence-score" class="confidence-value">0%</span>
                </div>
                <div class="model-controls">
                    <button class="new-conversation-btn" onclick="startNewConversation()" title="Start new conversation">
                        <i class="fas fa-plus"></i> New Chat
                    </button>
                </div>
                <div class="session-info">
                    <span class="session-label">Session:</span>
                    <span id="session-id" class="session-id">New</span>
                </div>
            </div>
        </div>

        <!-- Chat Messages -->
        <div class="chat-messages" id="chat-messages">
            <div class="welcome-message" id="welcome-message">
                <div class="message system-message">
                    <div class="message-content">
                        <div class="system-avatar">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="message-text">
                            <p><strong>Welcome to Mental Health Support Chat</strong></p>
                            <p>I'm here to provide compassionate support and evidence-based guidance. Our intelligent system will automatically select the best AI model for your specific needs.</p>
                            <p><strong>How it works:</strong></p>
                            <ul style="text-align: left; margin: 10px 0; padding-left: 20px;">
                                <li>Your first message will be analyzed to find the most suitable AI model</li>
                                <li>All subsequent messages will continue with that selected model</li>
                                <li>You can start a new conversation anytime to re-select models</li>
                            </ul>
                            <p><strong>Important:</strong> This is a supportive tool, not a replacement for professional mental health services. If you're experiencing a crisis, please contact emergency services or a crisis helpline.</p>
                            <p>üí¨ <strong>What's on your mind today?</strong></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Chat history will be populated here -->
            <div class="conversation-history" id="conversation-history">
                <!-- Messages will be added dynamically -->
            </div>
        </div>

        <!-- Typing Indicator -->
        <div class="typing-indicator" id="typing-indicator" style="display: none;">
            <div class="typing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <span class="typing-text">AI is responding...</span>
        </div>

        <!-- Chat Input -->
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <textarea 
                    id="message-input" 
                    placeholder="Type your message here... (Press Enter to send, Shift+Enter for new line)"
                    rows="1"></textarea>
                <button id="send-button" class="send-button">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <script>
        class TestChatInterface {
            constructor() {
                this.currentSessionId = null;
                this.selectedModel = null;
                this.conversationMode = 'initial';
                this.turnCount = 0;
                this.messageHistory = [];
                this.isProcessing = false;
                
                this.initializeElements();
                this.bindEvents();
                
                console.log('Test Chat Interface initialized');
            }
            
            initializeElements() {
                this.chatMessages = document.getElementById('chat-messages');
                this.messageInput = document.getElementById('message-input');
                this.sendButton = document.getElementById('send-button');
                this.currentModelElement = document.getElementById('current-model');
                this.sessionIdElement = document.getElementById('session-id');
                this.conversationHistory = document.getElementById('conversation-history');
                this.typingIndicator = document.getElementById('typing-indicator');
                this.welcomeMessage = document.getElementById('welcome-message');
                this.confidenceDisplay = document.getElementById('confidence-display');
                this.confidenceScore = document.getElementById('confidence-score');
            }
            
            bindEvents() {
                this.sendButton.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });
                
                // Auto-resize textarea
                this.messageInput.addEventListener('input', () => {
                    this.messageInput.style.height = 'auto';
                    this.messageInput.style.height = Math.min(this.messageInput.scrollHeight, 120) + 'px';
                });
            }
            
            async sendMessage() {
                const message = this.messageInput.value.trim();
                if (!message || this.isProcessing) return;
                
                this.isProcessing = true;
                this.setInputState(false);
                
                // Add user message to chat
                this.addMessage(message, 'user');
                this.messageInput.value = '';
                this.messageInput.style.height = 'auto';
                
                // Show typing indicator
                this.showTypingIndicator();
                
                try {
                    // Simulate API call to the chat endpoint
                    const response = await this.simulateChatAPI(message);
                    
                    // Hide typing indicator
                    this.hideTypingIndicator();
                    
                    // Update session info
                    this.updateSessionInfo(response);
                    
                    // Add assistant message
                    this.addMessage(response.response, 'assistant', {
                        model: response.selected_model,
                        conversationMode: response.conversation_mode,
                        turnCount: response.turn_count
                    });
                    
                    // Update state
                    this.currentSessionId = response.session_id;
                    this.selectedModel = response.selected_model;
                    this.conversationMode = response.conversation_mode;
                    this.turnCount = response.turn_count;
                    
                } catch (error) {
                    this.hideTypingIndicator();
                    console.error('Error sending message:', error);
                    this.addStatusMessage('Failed to send message. This is a test interface - please use the actual server.', 'warning');
                } finally {
                    this.isProcessing = false;
                    this.setInputState(true);
                }
            }
            
            async simulateChatAPI(message) {
                // Simulate network delay
                await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 3000));
                
                // Simulate model selection for first message
                if (!this.currentSessionId) {
                    const models = ['openai', 'claude', 'deepseek', 'gemma'];
                    const selectedModel = models[Math.floor(Math.random() * models.length)];
                    const confidence = 0.4 + Math.random() * 0.4; // 40-80%
                    
                    // Generate mock responses based on message content
                    let response = this.generateMockResponse(message, selectedModel);
                    
                    return {
                        response: response,
                        selected_model: selectedModel,
                        session_id: 'test-session-' + Date.now(),
                        confidence_score: confidence,
                        reasoning: `Selected ${selectedModel.toUpperCase()} for this conversation. Confidence: ${(confidence * 100).toFixed(1)}%`,
                        is_new_session: true,
                        turn_count: 1,
                        conversation_mode: 'initial'
                    };
                } else {
                    // Continue with selected model
                    let response = this.generateMockResponse(message, this.selectedModel);
                    
                    return {
                        response: response,
                        selected_model: this.selectedModel,
                        session_id: this.currentSessionId,
                        confidence_score: 0.75, // Fixed confidence for continued conversation
                        reasoning: `Continuing conversation with ${this.selectedModel.toUpperCase()} (turn ${this.turnCount + 1})`,
                        is_new_session: false,
                        turn_count: this.turnCount + 1,
                        conversation_mode: 'continued'
                    };
                }
            }
            
            generateMockResponse(message, model) {
                const messageLower = message.toLowerCase();
                
                // Model-specific response styles
                const responses = {
                    openai: {
                        anxiety: "I understand you're feeling anxious. Here are some evidence-based techniques that can help: deep breathing exercises, progressive muscle relaxation, and mindfulness meditation. Would you like me to guide you through a breathing exercise?",
                        depression: "I hear that you're going through a difficult time. It's important to acknowledge these feelings. Some strategies that many people find helpful include maintaining a routine, gentle exercise, and connecting with supportive people. Have you considered speaking with a mental health professional?",
                        general: "Thank you for sharing that with me. I'm here to support you. Can you tell me more about what you're experiencing so I can better understand how to help?"
                    },
                    claude: {
                        anxiety: "I can sense the anxiety you're experiencing, and I want you to know that what you're feeling is valid. Let's work together on some grounding techniques. Try the 5-4-3-2-1 method: name 5 things you can see, 4 you can touch, 3 you can hear, 2 you can smell, and 1 you can taste.",
                        depression: "I'm deeply sorry you're feeling this way. Depression can make everything feel overwhelming, but please know that these feelings can change. Small steps matter - even just reaching out here shows strength. What's one small thing that used to bring you comfort?",
                        general: "I'm here to listen and support you through whatever you're facing. Your feelings and experiences matter. What would be most helpful for you right now?"
                    },
                    deepseek: {
                        anxiety: "Anxiety analysis: Your symptoms suggest elevated stress response. Recommended interventions: 1) Controlled breathing (4-7-8 technique), 2) Cognitive restructuring, 3) Progressive exposure if applicable. Success rates for these approaches are 70-85%. Would you like detailed instructions?",
                        depression: "Depression indicators detected. Evidence-based treatments show: CBT (60-70% effectiveness), behavioral activation (55-65% effectiveness), exercise therapy (moderate effect size). Professional assessment recommended for comprehensive treatment planning.",
                        general: "Processing your input... I can provide information-based responses and evidence-backed recommendations. What specific area would you like me to analyze and provide guidance on?"
                    },
                    gemma: {
                        anxiety: "Feeling anxious is tough, but you're not alone in this. Many people find relief through simple practices like taking slow, deep breaths or going for a gentle walk. Sometimes just talking about what's worrying you can help lighten the load. What's been on your mind lately?",
                        depression: "I'm sorry you're going through this difficult time. It takes courage to reach out. Remember to be gentle with yourself - healing isn't linear. Small acts of self-care, like staying hydrated or stepping outside for fresh air, can make a difference. How are you taking care of yourself today?",
                        general: "I'm glad you're here and sharing with me. Everyone deserves support and understanding. Whatever you're going through, we can explore it together at your pace. What feels most important to talk about right now?"
                    }
                };
                
                // Determine response type
                if (messageLower.includes('anxious') || messageLower.includes('worry') || messageLower.includes('nervous')) {
                    return responses[model].anxiety;
                } else if (messageLower.includes('depressed') || messageLower.includes('sad') || messageLower.includes('hopeless')) {
                    return responses[model].depression;
                } else {
                    return responses[model].general;
                }
            }
            
            addMessage(content, sender, metadata = {}) {
                // Hide welcome message on first user message
                if (sender === 'user' && this.messageHistory.length === 0) {
                    this.welcomeMessage.style.display = 'none';
                }
                
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}-message`;
                
                const messageContent = document.createElement('div');
                messageContent.className = 'message-content';
                
                // Add avatar
                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                
                if (sender === 'user') {
                    avatar.textContent = 'U';
                } else {
                    avatar.innerHTML = '<i class="fas fa-robot"></i>';
                }
                
                // Create message bubble
                const messageBubble = document.createElement('div');
                messageBubble.className = 'message-bubble';
                messageBubble.innerHTML = this.formatMessage(content);
                
                // Add content to message
                messageContent.appendChild(avatar);
                messageContent.appendChild(messageBubble);
                
                // Add metadata
                const messageMeta = document.createElement('div');
                messageMeta.className = 'message-meta';
                
                const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                let metaHTML = `<span class="message-time">${timestamp}</span>`;
                
                if (sender === 'assistant' && metadata.model) {
                    metaHTML += `<span class="model-badge">${metadata.model.toUpperCase()}</span>`;
                    
                    if (metadata.conversationMode === 'initial') {
                        metaHTML += `<span class="model-badge">üîç Selected</span>`;
                    } else if (metadata.conversationMode === 'continued') {
                        metaHTML += `<span class="model-badge">üí¨ Turn ${metadata.turnCount || ''}</span>`;
                    }
                }
                
                messageMeta.innerHTML = metaHTML;
                messageContent.appendChild(messageMeta);
                
                messageDiv.appendChild(messageContent);
                this.conversationHistory.appendChild(messageDiv);
                
                // Store in message history
                this.messageHistory.push({
                    content,
                    sender,
                    metadata,
                    timestamp: new Date()
                });
                
                this.scrollToBottom();
                
                return messageDiv;
            }
            
            formatMessage(content) {
                return content
                    .replace(/\n/g, '<br>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank">$1</a>');
            }
            
            updateSessionInfo(data) {
                this.sessionIdElement.textContent = data.session_id.substring(0, 8);
                
                if (data.conversation_mode === 'initial') {
                    this.currentModelElement.textContent = `${data.selected_model.toUpperCase()} (Selected)`;
                    
                    // Show confidence score
                    if (this.confidenceDisplay && this.confidenceScore) {
                        this.confidenceScore.textContent = `${(data.confidence_score * 100).toFixed(1)}%`;
                        this.confidenceDisplay.style.display = 'block';
                    }
                    
                    this.addStatusMessage(`üîç Selected ${data.selected_model.toUpperCase()} (${(data.confidence_score * 100).toFixed(1)}% confidence)`, 'success');
                } else {
                    this.currentModelElement.textContent = data.selected_model.toUpperCase();
                }
            }
            
            addStatusMessage(message, type) {
                const statusDiv = document.createElement('div');
                statusDiv.className = `status-message ${type}`;
                statusDiv.textContent = message;
                
                this.conversationHistory.appendChild(statusDiv);
                this.scrollToBottom();
                
                // Remove after 5 seconds
                setTimeout(() => {
                    if (statusDiv.parentNode) {
                        statusDiv.remove();
                    }
                }, 5000);
            }
            
            showTypingIndicator() {
                this.typingIndicator.style.display = 'flex';
                this.scrollToBottom();
            }
            
            hideTypingIndicator() {
                this.typingIndicator.style.display = 'none';
            }
            
            setInputState(enabled) {
                this.messageInput.disabled = !enabled;
                this.sendButton.disabled = !enabled;
            }
            
            scrollToBottom() {
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }
            
            startNewConversation() {
                // Clear conversation state
                this.currentSessionId = null;
                this.selectedModel = null;
                this.conversationMode = 'initial';
                this.turnCount = 0;
                this.messageHistory = [];
                
                // Clear UI
                this.conversationHistory.innerHTML = '';
                
                // Show welcome message
                this.welcomeMessage.style.display = 'block';
                
                // Reset UI elements
                this.currentModelElement.textContent = 'Selecting best model...';
                this.sessionIdElement.textContent = 'New';
                
                if (this.confidenceDisplay) {
                    this.confidenceDisplay.style.display = 'none';
                }
                
                // Focus on input
                this.messageInput.focus();
                
                this.addStatusMessage('üÜï Started new conversation', 'info');
            }
        }

        // Global functions for HTML onclick handlers
        function startNewConversation() {
            if (window.testChat) {
                window.testChat.startNewConversation();
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.testChat = new TestChatInterface();
        });
    </script>
</body>
</html>